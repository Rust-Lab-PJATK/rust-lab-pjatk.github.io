<!DOCTYPE html>
<html lang="pl" >

<head>
    <meta charset="UTF-8"><meta http-equiv="Content-Security-Policy"
content="default-src 'self';font-src &#x27;self&#x27; data: 'self';img-src &#x27;self&#x27; https:&#x2F;&#x2F;* data:;media-src &#x27;self&#x27;;style-src &#x27;self&#x27; 'unsafe-inline';frame-src player.vimeo.com https:&#x2F;&#x2F;www.youtube-nocookie.com;connect-src 'self';script-src 'self' 'self'">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="base" content="https://rust-lab-pjatk.github.io">

    
    <title>Rust Lab PJATK â€¢ Implementacja serwera usÅ‚ugi Pigen na bazie protokoÅ‚u TCP</title>

    
    
    
        <link rel=icon href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="50%" x="50%" dominant-baseline="central" text-anchor="middle" font-size="88">ğŸ¦€</text></svg>'>
    

    
    

    
    
    
        
            <link rel="stylesheet" href="https://rust-lab-pjatk.github.io/custom_subset.css?h=0b9535a28bc3d5bf2321">
        
    

    
        <link rel="stylesheet" href="https://rust-lab-pjatk.github.io/main.css?h=5761abda13287149cf75" />
        <link rel="stylesheet" href="https://rust-lab-pjatk.github.io/skins/pjatk.css?h=14166792eb0b5e4e3507" />

    <meta name="color-scheme" content="light dark" />
        <meta name="theme-color" content="#e30613" />
        <meta name="description" content="Dowiedz siÄ™ jak napisaÄ‡ wielowÄ…tkowy serwer obliczajÄ…cy kolejne cyfry liczby pi, wykorzystujÄ…c protokÃ³Å‚ TCP i biblioteki do obsÅ‚ugi puli wÄ…tkÃ³w oraz duÅ¼ych liczb caÅ‚kowitych." />
        <meta property="og:description" content="Dowiedz siÄ™ jak napisaÄ‡ wielowÄ…tkowy serwer obliczajÄ…cy kolejne cyfry liczby pi, wykorzystujÄ…c protokÃ³Å‚ TCP i biblioteki do obsÅ‚ugi puli wÄ…tkÃ³w oraz duÅ¼ych liczb caÅ‚kowitych." />

    

    <meta property="og:title" content="Implementacja serwera usÅ‚ugi Pigen na bazie protokoÅ‚u TCP" />
    <meta property="og:type" content="article" />

    
<meta property="og:locale" content="pl_PL" />

    <meta property="og:url" content="https:&#x2F;&#x2F;rust-lab-pjatk.github.io&#x2F;blog&#x2F;implementacja-serwera-pigen-tcp&#x2F;" /><meta property="og:site_name" content="Rust Lab PJATK">
        <noscript><link rel="stylesheet" href="https://rust-lab-pjatk.github.io/no_js.css"/></noscript>
        <script type="text/javascript" src="https://rust-lab-pjatk.github.io/js/initializeTheme.min.js"></script>
        <script defer src="https://rust-lab-pjatk.github.io/js/themeSwitcher.min.js"></script></head>


<body>
    <header>
    <nav class="navbar">
        <div class="nav-title">
            <a class="home-title" href="https://rust-lab-pjatk.github.io">Rust Lab PJATK</a>
        </div>
            <div class="nav-navs">
                <ul>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://rust-lab-pjatk.github.io/blog/">Blog
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://rust-lab-pjatk.github.io/tags/">Tagi
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding" href="https://rust-lab-pjatk.github.io/archiwum/">Archiwum
                                </a>
                            </li>
                        <li class="menu-icons-container">
                        <ul class="menu-icons-group">
                            

                            
                            

                            <li class="theme-switcher-wrapper js"><div
        title="PrzeÅ‚Ä…cz ciemny&#x2F;jasny motyw"
        class="theme-switcher"
        tabindex="0"
        role="button"
        aria-label="PrzeÅ‚Ä…cz ciemny motyw"
        aria-pressed="false">
    </div><div
        title="PrzywrÃ³Ä‡ domyÅ›lny motyw"
        class="theme-resetter arrow"
        tabindex="0"
        role="button"
        aria-hidden="true"
        aria-label="PrzywrÃ³Ä‡ domyÅ›lny motyw">
    </div>

</li>
</ul>
                    </li>
                </ul>
            </div>
        
    </nav>
</header>

    <div class="content">

        
        




<main>
    <article>
        <h1 class="article-title">
            Implementacja serwera usÅ‚ugi Pigen na bazie protokoÅ‚u TCP
        </h1>

        <ul class="meta"><li>Autorzy: Maciej PÄ™dzich</li>
                <li><span class='separator' aria-hidden='true'>â€¢</span>15 mar 2025</li><li title="SÅ‚owa: 1940"><span class='separator' aria-hidden='true'>â€¢</span>Czas czytania (w minutach): 10</li><li class="tag"><span class='separator' aria-hidden='true'>â€¢</span>Tagi:&nbsp;</li><li class="tag"><a href="https://rust-lab-pjatk.github.io/tags/miniprojekt/">miniprojekt</a>,&nbsp;</li><li class="tag"><a href="https://rust-lab-pjatk.github.io/tags/sieci/">sieci</a></li>
        </ul>
            

<div class="toc-container">
    
        <h3>Spis treÅ›ci</h3>
    

    <ul>
        
            
            
                <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#specyfikacja-protokolu-i-moje-zmiany">Specyfikacja protokoÅ‚u i moje zmiany</a>
                    
                </li>
            
        
            
            
                <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#algorytm-na-obliczanie-kolejnych-cyfr-liczby-pi">Algorytm na obliczanie kolejnych cyfr liczby pi</a>
                    
                </li>
            
        
            
            
                <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#zewnetrzne-biblioteki">ZewnÄ™trzne biblioteki</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#threadpool-mechanizm-puli-watkow">threadpool - mechanizm puli wÄ…tkÃ³w</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#rug-duze-liczby-calkowite">rug - duÅ¼e liczby caÅ‚kowite</a>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#analiza-kodu">Analiza kodu</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#inicjalizacja-serwera-i-puli-watkow">Inicjalizacja serwera i puli wÄ…tkÃ³w</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#nasluchiwanie-polaczen-i-uruchamianie-kolejkowanie-watkow">NasÅ‚uchiwanie poÅ‚Ä…czeÅ„ i uruchamianie&#x2F;kolejkowanie wÄ…tkÃ³w</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#implementacja-algorytmu-na-obliczanie-kolejnych-cyfr-pi">Implementacja algorytmu na obliczanie kolejnych cyfr pi</a>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#podsumowanie">Podsumowanie</a>
                    
                </li>
            
        
    </ul>
</div>


        

        <section class="body"><p>Witaj, Å›wiecie!</p>
<p>Z okazji niedawno minionego <a href="https://www.piday.org">dnia liczby pi</a>, chciaÅ‚bym przedstawiÄ‡ mÃ³j projekt serwera (nieco zmodyfikowanej) usÅ‚ugi Pigen opisanej w <a href="https://datatracker.ietf.org/doc/html/rfc3091">dokumencie IETF RFC 3091</a> oraz wyjaÅ›niÄ‡ stojÄ…cy za nim algorytm do obliczania kolejnych cyfr tej liczby.</p>
<p><a href="https://github.com/Rust-Lab-PJATK/pigen-tcp">Kod ÅºrÃ³dÅ‚owy znajdziesz tutaj</a>.</p>
<h2 id="specyfikacja-protokolu-i-moje-zmiany"><a class="header-anchor no-hover-padding" href="#specyfikacja-protokolu-i-moje-zmiany" aria-label="Anchor link for: specyfikacja-protokolu-i-moje-zmiany"><span class="link-icon" aria-hidden="true"></span></a>
Specyfikacja protokoÅ‚u i moje zmiany</h2>
<p>Specyfikacja Pigen w oparciu o protokÃ³Å‚ transportowy TCP ma bardzo proste wymagania:</p>
<ol>
<li>Serwer nasÅ‚uchuje na porcie numer 314159.</li>
<li>Po nawiÄ…zaniu poÅ‚Ä…czenia z klientem, serwer wysyÅ‚a strumieniowo kolejne cyfry liczby Ï€ w systemie dziesiÄ™tnym i kodowaniu ASCII, poczÄ…wszy od pierwszej cyfry po przecinku, aÅ¼ do momentu rozÅ‚Ä…czenia siÄ™ przez klienta.</li>
</ol>
<p>WprowadziÅ‚em dwie drobne zmiany:</p>
<ol>
<li>Serwer nasÅ‚uchuje na porcie numer <strong>31415</strong>, poniewaÅ¼ najwiÄ™kszy moÅ¼liwy numer portu TCP wynosi 65535 (wybÃ³r portu 314159 byÅ‚ najpewniej niedopatrzeniem ze strony autora oryginalnego dokumentu).</li>
<li>[...] serwer wysyÅ‚a kolejne cyfry liczby Ï€ (w celu zmniejszenia obciÄ…Å¼enia sieci) [...], poczÄ…wszy od <strong>cyfry jednoÅ›ci</strong> [...], gdyÅ¼ uÅ‚atwia to implementacjÄ™ oraz wytÅ‚umaczenie dziaÅ‚ania zastosowanego przeze mnie algorytmu.</li>
</ol>
<p>Specyfikacja nie narzuca konkretnej metody generowania cyfr. ChoÄ‡ mÃ³gÅ‚bym wykorzystaÄ‡ <a href="http://newton.ex.ac.uk/research/qsystems/collabs/pi/pi6.txt">plik z milionem cyfr</a> i wysyÅ‚aÄ‡ jego zawartoÅ›Ä‡, takie rozwiÄ…zanie byÅ‚oby zbyt proste i maÅ‚o interesujÄ…ce. Co wiÄ™cej, nie speÅ‚nia ono potrzeb klientÃ³w Å¼Ä…dnych miliona jeden, miliona dwÃ³ch, czy miliona trzech pierwszych cyfr (o milionie czterech nie wspominajÄ…c).</p>
<h2 id="algorytm-na-obliczanie-kolejnych-cyfr-liczby-pi"><a class="header-anchor no-hover-padding" href="#algorytm-na-obliczanie-kolejnych-cyfr-liczby-pi" aria-label="Anchor link for: algorytm-na-obliczanie-kolejnych-cyfr-liczby-pi"><span class="link-icon" aria-hidden="true"></span></a>
Algorytm na obliczanie kolejnych cyfr liczby pi</h2>
<p>Zdecydowanie ciekawsze i bardziej elastyczne podejÅ›cie stanowi zaprogramowanie algorytmu, ktÃ³ry potrafi obliczyÄ‡ Ï€ z dowolnie duÅ¼Ä… precyzjÄ…, gdzie jedynymi ograniczeniami sÄ… dostÄ™pna moc obliczeniowa i pamiÄ™Ä‡.</p>
<p>Z pomocÄ… przychodzi wzÃ³r podany po raz pierwszy w XVII wieku przez <a href="https://en.wikipedia.org/wiki/William_Brouncker,_2nd_Viscount_Brouncker">Williama Brouncker'a</a>, ktÃ³ry przedstawia Ä‡wierÄ‡ Ï€ jako <a href="https://pl.wikipedia.org/wiki/U%C5%82amek_%C5%82a%C5%84cuchowy">uÅ‚amek Å‚aÅ„cuchowy</a>:</p>
<p>$$\dfrac \pi 4 = \dfrac 1 {1 + \cfrac {1^2} {2 + \cfrac {3^2} {2 + \cfrac {5^2} {2 + \cfrac {7^2} {2 + \cdots } } } } }$$</p>
<p>Jak zauwaÅ¼yÅ‚ L. J. Lange w <a href="https://www.jstor.org/stable/2589152">artykule <em>An Elegant Continued Fraction for Ï€</em></a>, przy <a href="https://proofwiki.org/wiki/Brouncker%27s_Formula">dowodzeniu prawdziwoÅ›ci powyÅ¼szego wzoru</a> moÅ¼na wykorzystaÄ‡ alternatywnÄ… formÄ™ uÅ‚amka Å‚aÅ„cuchowego dla gÅ‚Ã³wnej krzywej rozgaÅ‚Ä™zienia funkcji $\arctan(z)$ w pÅ‚aszczyÅºnie liczb zespolonych, gdzie $z$ nie znajduje siÄ™ na osi urojonej ani od $-i$ poniÅ¼ej, ani od $i$ wzwyÅ¼:</p>
<p>$$\arctan(z) = \frac {z} {1+{\cfrac {(1z)^{2} } {3+{\cfrac {(2z)^{2} } { 5+{\cfrac {(3z)^{2} } {7+{\cfrac {(4z)^{2} } {9+\cdots } } } } } } } } }$$</p>
<p>PodstawiajÄ…c 1 za $z$ oraz mnoÅ¼Ä…c obie strony rÃ³wnoÅ›ci razy 4, otrzymamy:</p>
<p>$$\pi = \frac {4} {1+{\cfrac {1^2} {3+{\cfrac {2^2} { 5+{\cfrac {3^2} {7+{\cfrac {4^2} {9+\cdots } } } } } } } } }$$</p>
<p>W tej formie, kaÅ¼dy kolejny zagnieÅ¼dÅ¼ony uÅ‚amek wynosi $\frac { k^2 } { 2k + 1 + \cdots } $ dla $k \in \natnums$, gdzie $\cdots$ oznacza sumÄ™ pozostaÅ‚ych uÅ‚amkÃ³w tej postaci od $k + 1$ do $\infty$.</p>
<p>Tym sposobem dochodzimy wreszcie do algorytmu opracowanego przez autorÃ³w <a href="https://homepages.cwi.nl/~steven/abc/programmers/handbook.html">podrÄ™cznika jÄ™zyka programowania ABC</a> (rozdziaÅ‚ <em>Examples of ABC</em>, podrozdziaÅ‚ <em>Numbers</em>), ktÃ³ry polega na obliczaniu dwÃ³ch kolejnych przybliÅ¼eÅ„, poczÄ…wszy od $\frac 4 1$ oraz $\frac 4 {1 + \frac 1 3 }$ (czyli $\frac {12} 4$) i sprawdzeniu rÃ³wnoÅ›ci ich kolejnych cyfr w rozwiniÄ™ciu dziesiÄ™tnym.</p>
<p>JeÅ›li na danej pozycji znajduje siÄ™ ta sama cyfra, wysyÅ‚amy jÄ… do klienta i sprawdzamy rÃ³wnoÅ›Ä‡ cyfr na kolejnej pozycji. W przeciwnym razie, obliczamy kolejny uÅ‚amek w Å‚aÅ„cuchu (w tej iteracji $\frac 4 {1 + \frac 1 { 3 + \frac 4 5 } }$), po czym wykonujemy sprawdzenie zgodnoÅ›ci wiodÄ…cych cyfr z $\frac 4 {1 + \frac 1 3 }$, dÄ…Å¼Ä…c tym samym do coraz wiÄ™kszej dokÅ‚adnoÅ›ci z kaÅ¼dym nastÄ™pnym $k$.</p>
<h2 id="zewnetrzne-biblioteki"><a class="header-anchor no-hover-padding" href="#zewnetrzne-biblioteki" aria-label="Anchor link for: zewnetrzne-biblioteki"><span class="link-icon" aria-hidden="true"></span></a>
ZewnÄ™trzne biblioteki</h2>
<p>Zanim przejdziemy do <em>czÄ™Å›ci praktycznej</em> tego artykuÅ‚u, musimy jeszcze poruszyÄ‡ dwie kwestie zwiÄ…zane z projektem serwera Pigen.</p>
<h3 id="threadpool-mechanizm-puli-watkow"><a class="header-anchor no-hover-padding" href="#threadpool-mechanizm-puli-watkow" aria-label="Anchor link for: threadpool-mechanizm-puli-watkow"><span class="link-icon" aria-hidden="true"></span></a>
<code>threadpool</code> - mechanizm puli wÄ…tkÃ³w</h3>
<p>PierwszÄ… z nich jest obsÅ‚uga wielu klientÃ³w jednoczeÅ›nie. PoniewaÅ¼ mamy do czynienia z usÅ‚ugÄ…, ktÃ³ra kÅ‚adzie wiÄ™kszy nacisk na moc obliczeniowÄ… serwera niÅ¼ przepustowoÅ›Ä‡ sieci, zdecydowaÅ‚em siÄ™ na wykorzystanie tradycyjnych wÄ…tkÃ³w systemowych zamiast modelu <code>async/await</code>.</p>
<p>OczywiÅ›cie, tworzenie nowego wÄ…tku za kaÅ¼dym razem gdy zostanie nawiÄ…zane poÅ‚Ä…czenie to prosty przepis na nieszczÄ™Å›cie. Wystarczy, Å¼e ktoÅ› uruchomi skrypt, ktÃ³ry w nieskoÅ„czonej pÄ™tli bÄ™dzie otwieraÅ‚ nowe poÅ‚Ä…czenia, Å¼eby nie tylko nasz program, ale teÅ¼ caÅ‚e urzÄ…dzenie padÅ‚o na kolana.</p>
<p>Bardziej rozsÄ…dnym podejÅ›ciem jest tworzenie ograniczonej liczby wÄ…tkÃ³w do obsÅ‚ugi poÅ‚Ä…czeÅ„. W przypadku gdy zostanie ona osiÄ…gniÄ™ta, a nowy klient bÄ™dzie chciaÅ‚ nawiÄ…zaÄ‡ z nami poÅ‚Ä…czenie, wystarczy go poinformowaÄ‡ o peÅ‚nym obciÄ…Å¼eniu i zakolejkowaÄ‡ jego Å¼Ä…danie. Kiedy inny klient siÄ™ rozÅ‚Ä…czy, bÄ™dziemy mogli wÃ³wczas obsÅ‚uÅ¼yÄ‡ klienta oczekujÄ…cego w kolejce.</p>
<p>ChoÄ‡ mÃ³gÅ‚bym siÄ™ pokusiÄ‡ o napisanie <a href="https://buraksekili.github.io/articles/thread-pooling-rs">wÅ‚asnego mechanizmu puli wÄ…tkÃ³w</a>, postanowiÅ‚em siÄ™gnÄ…Ä‡ po <a href="https://crates.io/crates/threadpool">bibliotekÄ™ <code>threadpool</code></a>, by skupiÄ‡ siÄ™ na wczeÅ›niej opisanym algorytmie. Skoro znÃ³w o nim mowa, czas przejÅ›Ä‡ do drugiego problemu.</p>
<h3 id="rug-duze-liczby-calkowite"><a class="header-anchor no-hover-padding" href="#rug-duze-liczby-calkowite" aria-label="Anchor link for: rug-duze-liczby-calkowite"><span class="link-icon" aria-hidden="true"></span></a>
<code>rug</code> - duÅ¼e liczby caÅ‚kowite</h3>
<p>Podstawowe typy liczb caÅ‚kowitych w jÄ™zyku Rust majÄ… pojemnoÅ›Ä‡ ograniczonÄ… do konkretnej liczby bajtÃ³w. Dla zdecydowanej wiÄ™kszoÅ›ci programÃ³w dany zakres jest wystarczajÄ…co duÅ¼y by przechowywaÄ‡ dane i wykonywaÄ‡ na nich obliczenia bez obaw o przekroczenie maksymalnej dopuszczalnej wartoÅ›ci.</p>
<p>Niestety, nawet 64-bitowa liczba caÅ‚kowita bez znaku (ktÃ³ra potrafi zmieÅ›ciÄ‡ <a href="https://doc.rust-lang.org/std/primitive.u64.html#associatedconstant.MAX">ponad 18 trylionÃ³w</a>), okazuje siÄ™ dla uÅ¼ytego przeze mnie algorytmu zbyt maÅ‚a do obliczenia... dziesiÄ…tej cyfry po przecinku. Nic jednak dziwnego, gdyÅ¼ ten algorytm zostaÅ‚ napisany z myÅ›lÄ… o jÄ™zyku ABC, ktÃ³rego typ liczby caÅ‚kowitej ma (teoretycznie) nieograniczonÄ… pojemnoÅ›Ä‡.</p>
<p>MaÅ‚o tego, w niektÃ³rych jÄ™zykach <em>gÅ‚Ã³wnego nurtu</em> takich jak <a href="https://docs.python.org/3/library/stdtypes.html#numeric-types-int-float-complex">Python</a> czy <a href="https://ruby-doc.com/docs/ProgrammingRuby/html/tut_stdtypes.html">Ruby</a>, liczby caÅ‚kowite rÃ³wnieÅ¼ sÄ… (lub mogÄ… byÄ‡ w razie potrzeby) przechowywane w formie potrafiÄ…cej pomieÅ›ciÄ‡ dowolnie duÅ¼Ä… wartoÅ›Ä‡. Z kolei w jÄ™zykach pokroju <a href="https://docs.oracle.com/javase/8/docs/api/java/math/BigInteger.html">Javy</a> albo <a href="https://learn.microsoft.com/pl-pl/dotnet/api/system.numerics.biginteger?view=net-9.0">C#'a</a>, dostÄ™pny jest oddzielny typ do reprezentowania <em>nieskoÅ„czenie wielkich</em> liczb caÅ‚kowitych.</p>
<p>O ile Rust nie posiada wbudowanego w jÄ™zyk rozwiÄ…zania w stylu ostatnich dwÃ³ch ze wczeÅ›niej wspomnianych jÄ™zykÃ³w, tak na ratunek przychodzi spoÅ‚ecznoÅ›Ä‡ z <a href="https://crates.io/crates/rug">bibliotekÄ… <code>rug</code></a>, ktÃ³ra dostarcza wysokopoziomowy interfejs programistyczny dla <a href="https://gmplib.org">GNU Multiple Precision Arithmetic Library</a>.</p>
<p>Skrzynka <code>rug</code> jest udostÄ™pniana na licencji <a href="https://www.gnu.org/licenses/lgpl-3.0.en.html">GNU <strong>Lesser</strong> General Public License v3</a>, co powinno uÅ‚atwiÄ‡ jej integracjÄ™ z komercyjnymi projektami. JeÅ›li mimo to jej licencja nadal jest nieodpowiednia, polecam zapoznaÄ‡ siÄ™ z zamiennikiem w postaci <a href="https://lib.rs/crates/num-bigint">biblioteki <code>num-bigint</code></a>.</p>
<h2 id="analiza-kodu"><a class="header-anchor no-hover-padding" href="#analiza-kodu" aria-label="Anchor link for: analiza-kodu"><span class="link-icon" aria-hidden="true"></span></a>
Analiza kodu</h2>
<p>Po tym obszernym wstÄ™pie moÅ¼emy w koÅ„cu przejÅ›Ä‡ do analizy kodu serwera.</p>
<h3 id="inicjalizacja-serwera-i-puli-watkow"><a class="header-anchor no-hover-padding" href="#inicjalizacja-serwera-i-puli-watkow" aria-label="Anchor link for: inicjalizacja-serwera-i-puli-watkow"><span class="link-icon" aria-hidden="true"></span></a>
Inicjalizacja serwera i puli wÄ…tkÃ³w</h3>
<p>Zacznijmy od zaimportowania potrzebnych nam cech/interfejsÃ³w i struktur oraz utworzenia ich instancji:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">rug<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>Assign<span class="z-punctuation z-separator z-rust">,</span> Integer</span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">error<span class="z-punctuation z-accessor z-rust">::</span></span>Error<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">io<span class="z-punctuation z-accessor z-rust">::</span></span>Write<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">std<span class="z-punctuation z-accessor z-rust">::</span></span><span class="z-meta z-path z-rust">net<span class="z-punctuation z-accessor z-rust">::</span></span>TcpListener<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-keyword z-other z-rust">use</span> <span class="z-meta z-path z-rust">threadpool<span class="z-punctuation z-accessor z-rust">::</span></span>ThreadPool<span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-function z-rust"><span class="z-storage z-type z-function z-rust">fn</span> </span><span class="z-entity z-name z-function z-rust">main</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-begin z-rust">(</span></span><span class="z-meta z-function z-rust"><span class="z-meta z-function z-parameters z-rust"><span class="z-punctuation z-section z-parameters z-end z-rust">)</span></span></span></span><span class="z-meta z-function z-rust"> <span class="z-meta z-function z-return-type z-rust"><span class="z-punctuation z-separator z-rust">-&gt;</span> <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Result</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-punctuation z-section z-group z-end z-rust">)</span>, <span class="z-meta z-generic z-rust"><span class="z-support z-type z-rust">Box</span><span class="z-punctuation z-definition z-generic z-begin z-rust">&lt;</span>dyn Error<span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span><span class="z-punctuation z-definition z-generic z-end z-rust">&gt;</span></span></span> </span><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> pool <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">ThreadPool<span class="z-punctuation z-accessor z-rust">::</span></span>new<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">5</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> listener <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">TcpListener<span class="z-punctuation z-accessor z-rust">::</span></span>bind<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>0.0.0.0:31415<span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-keyword z-operator z-rust">?</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust">    <span class="z-support z-type z-rust">Ok</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-function z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span>
</span></code></pre>
<p>WykorzystaÅ‚em <a href="https://doc.rust-lang.org/rust-by-example/error/result.html#using-result-in-main">alternatywnÄ… sygnaturÄ™ funkcji <code>main</code></a>, aby mÃ³c posÅ‚ugiwaÄ‡ siÄ™ <a href="https://doc.rust-lang.org/rust-by-example/std/result/question_mark.html">operatorem <code>?</code></a> do wyÅ‚uskiwania pomyÅ›lnych wynikÃ³w zamiast potencjalnie panikujÄ…cych wywoÅ‚aÅ„ <a href="https://doc.rust-lang.org/std/result/enum.Result.html#method.unwrap"><code>unwrap()</code></a>. W razie wystÄ…pienia wyjÄ…tku, ten zostanie wyÅ›wietlony w postaci <a href="https://doc.rust-lang.org/std/fmt/trait.Debug.html"><code>Debug</code></a>, a proces zakoÅ„czy siÄ™ z kodem bÅ‚Ä™du. Natomiast podstawienie <a href="https://doc.rust-lang.org/std/boxed/index.html"><code>Box&lt;dyn Error&gt;</code></a> jako spodziewany typ bÅ‚Ä™du umoÅ¼liwia zwracanie obiektu dowolnego typu, pod warunkiem Å¼e implementuje <a href="https://doc.rust-lang.org/std/error/trait.Error.html">cechÄ™ <code>Error</code></a>.</p>
<p>Co do liczby wÄ…tkÃ³w w puli, 5 nie jest w Å¼aden sposÃ³b wiÄ…Å¼Ä…cÄ… czy najbardziej optymalnÄ… liczbÄ…. MoÅ¼na dowolnie eksperymentowaÄ‡ z jej zwiÄ™kszaniem lub zmniejszaniem w zaleÅ¼noÅ›ci od wymaganej liczby klientÃ³w do rÃ³wnolegÅ‚ego obsÅ‚ugiwania oraz mocy obliczeniowej serwera.</p>
<h3 id="nasluchiwanie-polaczen-i-uruchamianie-kolejkowanie-watkow"><a class="header-anchor no-hover-padding" href="#nasluchiwanie-polaczen-i-uruchamianie-kolejkowanie-watkow" aria-label="Anchor link for: nasluchiwanie-polaczen-i-uruchamianie-kolejkowanie-watkow"><span class="link-icon" aria-hidden="true"></span></a>
NasÅ‚uchiwanie poÅ‚Ä…czeÅ„ i uruchamianie/kolejkowanie wÄ…tkÃ³w</h3>
<p>Mamy zadeklarowany nasÅ‚uchiwacz, wiÄ™c pora na obsÅ‚ugÄ™ przychodzÄ…cych poÅ‚Ä…czeÅ„. JeÅ›li dysponujemy wolnym wÄ…tkiem, moÅ¼emy natychmiastowo rozpoczÄ…Ä‡ generowanie cyfr Ï€ dla klienta. W przeciwnym razie musimy go poinformowaÄ‡, Å¼e serwer osiÄ…gnÄ…Å‚ limit obsÅ‚ugiwanych jednoczeÅ›nie poÅ‚Ä…czeÅ„ i zakolejkowaÄ‡ Å¼Ä…danie.</p>
<p>W tym celu naleÅ¼y dodaÄ‡ poniÅ¼szy kawaÅ‚ek kodu miÄ™dzy deklaracjÄ… zmiennej <code>listener</code>, a zwrÃ³ceniem wartoÅ›ci <code>Ok(())</code>:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-keyword z-control z-rust">for</span> <span class="z-storage z-modifier z-rust">mut</span> stream <span class="z-keyword z-operator z-rust">in</span> listener<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">incoming</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">flatten</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> pool<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">active_count</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-comparison z-rust">==</span> pool<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">max_count</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        stream<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">write_all</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-string z-quoted z-double z-rust"><span class="z-storage z-type z-string z-rust">b</span><span class="z-punctuation z-definition z-string z-begin z-rust">&quot;</span>Serwer jest zajÄ™ty! ProszÄ™ czekaÄ‡...<span class="z-constant z-character z-escape z-rust">\n</span><span class="z-punctuation z-definition z-string z-end z-rust">&quot;</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-keyword z-operator z-rust">?</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    pool<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">execute</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-storage z-modifier z-rust">move</span> <span class="z-keyword z-operator z-logical z-rust">||</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">        <span class="z-comment z-line z-double-slash z-rust"><span class="z-punctuation z-definition z-comment z-rust">//</span> cdn.
</span></span></span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-group z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p><a href="https://doc.rust-lang.org/std/net/struct.TcpListener.html#method.incoming">Metoda <code>incoming()</code></a> zwraca iterator, ktÃ³ry w nieskoÅ„czonej pÄ™tli akceptuje przychodzÄ…ce poÅ‚Ä…czenia, a kaÅ¼dy element jest <a href="https://doc.rust-lang.org/std/io/type.Result.html">typu <code>io::Result</code></a>, ktÃ³rego pomyÅ›lnym wynikiem jest <a href="https://doc.rust-lang.org/std/net/struct.TcpStream.html">obiekt reprezentujÄ…cy strumieÅ„ TCP</a>. Z kolei <a href="https://doc.rust-lang.org/std/iter/trait.Iterator.html#method.flatten">metoda <code>flatten()</code></a> pozwala nam wyÅ‚uskaÄ‡ wspomniany strumieÅ„ z elementÃ³w iteratora, ktÃ³re sÄ… pomyÅ›lnymi wynikami, a oprÃ³cz tego pominÄ…Ä‡ wszystkie wyniki wariantu poraÅ¼ki.</p>
<p>Pomimo tego, Å¼e wykonujemy sprawdzenie rÃ³wnoÅ›ci obecnej liczby aktywnych wÄ…tkÃ³w i ich maksymalnej dopuszczalnej liczby, zarÃ³wno uruchamianie jak i kolejkowanie wÄ…tkÃ³w odbywa siÄ™ poprzez wywoÅ‚anie <a href="https://docs.rs/threadpool/1.8.1/threadpool/struct.ThreadPool.html#method.execute">metody <code>execute()</code> puli wÄ…tkÃ³w</a>. Pula zadba o uruchomienie pierwszego w kolejce wÄ…tku kiedy inny wÄ…tek zakoÅ„czy pracÄ™.</p>
<p>PoniewaÅ¼ bÄ™dziemy odwoÅ‚ywaÄ‡ siÄ™ wewnÄ…trz wÄ…tku do obiektu <code>stream</code>, naleÅ¼y pamiÄ™taÄ‡ o umieszczeniu sÅ‚owa kluczowego <code>move</code> przed definicjÄ… domkniÄ™cia. Istnieje bowiem szansa, Å¼e wÄ…tek <em>poboczny</em> bÄ™dzie aktywny dÅ‚uÅ¼ej niÅ¼ ten, ktÃ³ry go uruchomiÅ‚. StÄ…d teÅ¼ wymagane jest, by wszelkie dane uÅ¼ywane w nowym wÄ…tku miaÅ‚y czas Å¼ycia rÃ³wny <code>'static</code>, czyli Å¼eby byÅ‚y dostÄ™pne aÅ¼ do koÅ„ca dziaÅ‚ania wÄ…tku.</p>
<p>DomyÅ›lnie <code>stream</code> zostaÅ‚by jedynie poÅ¼yczony, a skoro nie mamy gwarancji, Å¼e jego czas Å¼ycia bÄ™dzie co najmniej rÃ³wny czasowi trwania wÄ…tku, to przy prÃ³bie uÅ¼ycia <code>stream</code> w domkniÄ™ciu bez <code>move</code> otrzymamy <a href="https://doc.rust-lang.org/error_codes/E0373.html">bÅ‚Ä…d kompilacji</a>. Zatem domkniÄ™cie musi przejÄ…Ä‡ <code>stream</code> na wÅ‚asnoÅ›Ä‡ w celu speÅ‚nienia powyÅ¼szego wymagania.</p>
<h3 id="implementacja-algorytmu-na-obliczanie-kolejnych-cyfr-pi"><a class="header-anchor no-hover-padding" href="#implementacja-algorytmu-na-obliczanie-kolejnych-cyfr-pi" aria-label="Anchor link for: implementacja-algorytmu-na-obliczanie-kolejnych-cyfr-pi"><span class="link-icon" aria-hidden="true"></span></a>
Implementacja algorytmu na obliczanie kolejnych cyfr pi</h3>
<p>Czas na gwÃ³dÅº programu. Zaczynamy wewnÄ…trz domkniÄ™cia od deklaracji zmiennych dla $k$ oraz dwÃ³ch kolejnych przybliÅ¼eÅ„ Ï€:</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> k <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Integer<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">2</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> a <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Integer<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">4</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> b <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Integer<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">1</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> a1 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Integer<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">12</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> b1 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Integer<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">4</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></code></pre>
<p>Zmienne <code>a</code> i <code>a1</code> oznaczajÄ… liczniki, zaÅ› <code>b</code> i <code>b1</code> mianowniki odpowiednich przybliÅ¼eÅ„. NastÄ™pnie rozpoczynamy nieskoÅ„czonÄ… pÄ™tlÄ™ z etykietÄ… <code>'pi</code>, na poczÄ…tku ktÃ³rej obliczamy $k$-ty uÅ‚amek w serii i odpowiednio zwiÄ™kszamy <code>a1</code> i <code>b1</code>, by uzyskaÄ‡ $k$-te przybliÅ¼enie Ï€. Poprzednie wartoÅ›ci tych zmiennych przypisujemy do <code>a</code> i <code>b</code> oraz zwiÄ™kszamy $k$ o 1.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-entity z-name z-label z-rust">&#39;pi</span><span class="z-punctuation z-separator z-rust">:</span> <span class="z-keyword z-control z-rust">loop</span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> p <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Integer<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>k <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>k</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> q <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Integer<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-constant z-numeric z-integer z-decimal z-rust">2</span> <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>k</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-arithmetic z-rust">+</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> prev_a1 <span class="z-keyword z-operator z-assignment z-rust">=</span> a1<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clone</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> prev_b1 <span class="z-keyword z-operator z-assignment z-rust">=</span> b1<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">clone</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    k <span class="z-keyword z-operator z-assignment z-rust">+=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">1</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    a1 <span class="z-keyword z-operator z-assignment z-rust">*=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>q<span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    a1 <span class="z-keyword z-operator z-assignment z-rust">+=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>p <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>a<span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    b1 <span class="z-keyword z-operator z-assignment z-rust">*=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>q<span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    b1 <span class="z-keyword z-operator z-assignment z-rust">+=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>p <span class="z-keyword z-operator z-arithmetic z-rust">*</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>b<span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    a <span class="z-keyword z-operator z-assignment z-rust">=</span> prev_a1<span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    b <span class="z-keyword z-operator z-assignment z-rust">=</span> prev_b1<span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>Warto zwrÃ³ciÄ‡ uwagÄ™ chociaÅ¼by na formÄ™ deklaracji zmiennych <code>p</code> i <code>q</code> oraz na rozbicie poszczegÃ³lnych operacji na <code>a1</code> i <code>b1</code> zamiast jednego wiÄ™kszego wyraÅ¼enia lub operacji przypisania jak w oryginalnej implementacji algorytmu w jÄ™zyku ABC. Wynika to ze zwracania przez <code>rug</code> <a href="https://docs.rs/rug/1.27.0/rug/index.html#incomplete-computation-values"><em>niepeÅ‚nego wyniku obliczeÅ„</em></a> dla dziaÅ‚aÅ„ na dwÃ³ch obiektach <code>Integer</code> zamiast nowego obiektu tego samego typu.</p>
<p>Takie zachowanie pozwala zmniejszyÄ‡ liczbÄ™ kosztownych operacji alokacji pamiÄ™ci wykonywanych przez te obiekty, chociaÅ¼by poprzez przypisywanie tych wynikÃ³w do istniejÄ…cych obiektÃ³w z pomocÄ… przeciÄ…Å¼onych operatorÃ³w albo <a href="https://docs.rs/rug/1.27.0/rug/struct.Integer.html#impl-Assign-for-Integer">metody <code>assign()</code></a>. JeÅ›li jednak nie ma innego wyjÅ›cia niÅ¼ utworzenie nowej liczby typu <code>Integer</code>, to moÅ¼emy przekazaÄ‡ wynik do <code>Integer::from</code> tak samo jak robiliÅ›my to ze <em>zwykÅ‚ymi</em> liczbami.</p>
<p>ZostaÅ‚o nam juÅ¼ tylko wyciÄ…ganie i porÃ³wnywanie kolejnych cyfr z rozwiniÄ™Ä‡ dziesiÄ™tnych przybliÅ¼eÅ„ Ï€ Jesli cyfra na danej pozycji jest taka sama dla obu uÅ‚amkÃ³w, moÅ¼emy jÄ… wysÅ‚aÄ‡ do klienta. W razie gdy jej przesÅ‚anie siÄ™ nie powiedzie (najpewniej z powodu zerwania poÅ‚Ä…czenia przez klienta), przerywamy pÄ™tlÄ™ <code>'pi</code> i tym samym koÅ„czymy wÄ…tek. JeÅ›li cyfry siÄ™ rÃ³Å¼niÄ…, to oznacza, Å¼e czas na obliczenie kolejnego przybliÅ¼enia Ï€.</p>
<pre data-lang="rust" class="language-rust z-code"><code class="language-rust" data-lang="rust"><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> d <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Integer<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>a <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>b</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust"><span class="z-storage z-type z-rust">let</span> <span class="z-storage z-modifier z-rust">mut</span> d1 <span class="z-keyword z-operator z-assignment z-rust">=</span> <span class="z-meta z-path z-rust">Integer<span class="z-punctuation z-accessor z-rust">::</span></span>from<span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>a1 <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>b1</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span><span class="z-source z-rust">
</span><span class="z-source z-rust"><span class="z-keyword z-control z-rust">while</span> d <span class="z-keyword z-operator z-comparison z-rust">==</span> d1 <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-storage z-type z-rust">let</span> ascii_d <span class="z-keyword z-operator z-assignment z-rust">=</span> d<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">to_string</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    <span class="z-keyword z-control z-rust">if</span> <span class="z-storage z-type z-rust">let</span> <span class="z-support z-type z-rust">Err</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>_e</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-keyword z-operator z-assignment z-rust">=</span> stream<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">write_all</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span>ascii_d<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">as_ref</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span></span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span> <span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-begin z-rust">{</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">        <span class="z-keyword z-control z-rust">break</span> <span class="z-storage z-modifier z-lifetime z-rust">&#39;pi</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"><span class="z-meta z-block z-rust">    </span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    a <span class="z-keyword z-operator z-assignment z-rust">%=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>b<span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    a <span class="z-keyword z-operator z-assignment z-rust">*=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">10</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    a1 <span class="z-keyword z-operator z-assignment z-rust">%=</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>b1<span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    a1 <span class="z-keyword z-operator z-assignment z-rust">*=</span> <span class="z-constant z-numeric z-integer z-decimal z-rust">10</span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    d<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">assign</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>a <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>b</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust">    d1<span class="z-punctuation z-accessor z-dot z-rust">.</span><span class="z-support z-function z-rust">assign</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-begin z-rust">(</span><span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>a1 <span class="z-keyword z-operator z-arithmetic z-rust">/</span> <span class="z-keyword z-operator z-bitwise z-rust">&amp;</span>b1</span><span class="z-meta z-group z-rust"><span class="z-punctuation z-section z-group z-end z-rust">)</span></span><span class="z-punctuation z-terminator z-rust">;</span>
</span></span><span class="z-source z-rust"><span class="z-meta z-block z-rust"></span><span class="z-meta z-block z-rust"><span class="z-punctuation z-section z-block z-end z-rust">}</span></span>
</span></code></pre>
<p>Warto zauwaÅ¼yÄ‡, Å¼e nie musimy dokonywaÄ‡ konwersji Å‚aÅ„cucha <code>ascii_d</code> na opakowywany przez niego wektor bajtÃ³w. Typ <code>String</code> implementuje <a href="https://doc.rust-lang.org/std/convert/trait.AsRef.html">cechÄ™ <code>AsRef</code></a> do pobierania referencji na wycinek bajtÃ³w (<code>&amp;[u8]</code>) zamiast <code>&amp;String</code>, kiedy <a href="https://doc.rust-lang.org/std/io/trait.Write.html#method.write_all">metoda <code>write_all()</code></a> wymaga dostarczenia danych do wysÅ‚ania w formie <code>&amp;[u8]</code>.</p>
<h2 id="podsumowanie"><a class="header-anchor no-hover-padding" href="#podsumowanie" aria-label="Anchor link for: podsumowanie"><span class="link-icon" aria-hidden="true"></span></a>
Podsumowanie</h2>
<p>Serwer jest gotowy! Teraz wystarczy go uruchomiÄ‡ i przetestowaÄ‡ np. za pomocÄ… klienta ogÃ³lnego uÅ¼ytku jak <a href="https://nmap.org/ncat"><code>ncat</code></a>:</p>
<pre data-lang="bash" class="language-bash z-code"><code class="language-bash" data-lang="bash"><span class="z-source z-shell z-bash"><span class="z-meta z-function-call z-shell"><span class="z-variable z-function z-shell">ncat</span></span><span class="z-meta z-function-call z-arguments z-shell"><span class="z-variable z-parameter z-option z-shell"><span class="z-punctuation z-definition z-parameter z-shell"> --</span>recv-only</span> WSTAW_TU_IP_SERWERA 31415</span>
</span></code></pre>
<p>OczywiÅ›cie, temu projektowi daleko do miana rekordzisty prÄ™dkoÅ›ci, a samych sposobÃ³w na wyznaczanie kolejnych cyfr liczby Ï€ jest znacznie wiÄ™cej. Moim celem byÅ‚o zaprezentowanie paru przydatnych bibliotek oraz wyjaÅ›nienie caÅ‚kiem prostego w implementacji aglorytmu, co mam nadziejÄ™ udaÅ‚o mi siÄ™ osiÄ…gnÄ…Ä‡.</p>
<p>ZachÄ™cam do poeksperymentowania z innymi algorytmami, rozbijaniem samych obliczeÅ„ na wiele wÄ…tkÃ³w, czy napisania od podstaw serwera usÅ‚ugi Pigen w oparciu o <a href="https://datatracker.ietf.org/doc/html/rfc3091#autoid-3">protokÃ³Å‚ UDP</a>.</p>
<p>Do zobaczenia w kolejnym artykule!</p>

        </section>

        
        
        

        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
            
            
            

            
        
        

    </article>
</main>

    <div id="button-container">
        
        
            <div id="toc-floating-container">
                <input type="checkbox" id="toc-toggle" class="toggle"/>
                <label for="toc-toggle" class="overlay"></label>
                <label for="toc-toggle" id="toc-button" class="button" title="PrzeÅ‚Ä…cz spis treÅ›Ä‡">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -960 960 960"><path d="M414.82-193.094q-18.044 0-30.497-12.32-12.453-12.319-12.453-30.036t12.453-30.086q12.453-12.37 30.497-12.37h392.767q17.237 0 29.927 12.487 12.69 12.486 12.69 30.203 0 17.716-12.69 29.919t-29.927 12.203H414.82Zm0-244.833q-18.044 0-30.497-12.487Q371.87-462.9 371.87-480.45t12.453-29.92q12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.511 12.69 12.512 12.69 29.845 0 17.716-12.69 30.086-12.69 12.37-29.927 12.37H414.82Zm0-245.167q-18.044 0-30.497-12.32t-12.453-30.037q0-17.716 12.453-30.086 12.453-12.369 30.497-12.369h392.767q17.237 0 29.927 12.486 12.69 12.487 12.69 30.203 0 17.717-12.69 29.92-12.69 12.203-29.927 12.203H414.82ZM189.379-156.681q-32.652 0-55.878-22.829t-23.226-55.731q0-32.549 23.15-55.647 23.151-23.097 55.95-23.097 32.799 0 55.313 23.484 22.515 23.484 22.515 56.246 0 32.212-22.861 54.893-22.861 22.681-54.963 22.681Zm0-245.167q-32.652 0-55.878-23.134-23.226-23.135-23.226-55.623 0-32.487 23.467-55.517t56.12-23.03q32.102 0 54.721 23.288 22.62 23.288 22.62 55.775 0 32.488-22.861 55.364-22.861 22.877-54.963 22.877Zm-.82-244.833q-32.224 0-55.254-23.288-23.03-23.289-23.03-55.623 0-32.333 23.271-55.364 23.272-23.03 55.495-23.03 32.224 0 55.193 23.288 22.969 23.289 22.969 55.622 0 32.334-23.21 55.364-23.21 23.031-55.434 23.031Z"/></svg>
                </label>
                <div class="toc-content">
                    

<div class="toc-container">
    

    <ul>
        
            
            
                <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#specyfikacja-protokolu-i-moje-zmiany">Specyfikacja protokoÅ‚u i moje zmiany</a>
                    
                </li>
            
        
            
            
                <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#algorytm-na-obliczanie-kolejnych-cyfr-liczby-pi">Algorytm na obliczanie kolejnych cyfr liczby pi</a>
                    
                </li>
            
        
            
            
                <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#zewnetrzne-biblioteki">ZewnÄ™trzne biblioteki</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#threadpool-mechanizm-puli-watkow">threadpool - mechanizm puli wÄ…tkÃ³w</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#rug-duze-liczby-calkowite">rug - duÅ¼e liczby caÅ‚kowite</a>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#analiza-kodu">Analiza kodu</a>
                    
                        <ul>
                            
                                
                                    <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#inicjalizacja-serwera-i-puli-watkow">Inicjalizacja serwera i puli wÄ…tkÃ³w</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#nasluchiwanie-polaczen-i-uruchamianie-kolejkowanie-watkow">NasÅ‚uchiwanie poÅ‚Ä…czeÅ„ i uruchamianie&#x2F;kolejkowanie wÄ…tkÃ³w</a>
                                        
                                    </li>
                                
                            
                                
                                    <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#implementacja-algorytmu-na-obliczanie-kolejnych-cyfr-pi">Implementacja algorytmu na obliczanie kolejnych cyfr pi</a>
                                        
                                    </li>
                                
                            
                        </ul>
                    
                </li>
            
        
            
            
                <li><a href="https://rust-lab-pjatk.github.io/blog/implementacja-serwera-pigen-tcp/#podsumowanie">Podsumowanie</a>
                    
                </li>
            
        
    </ul>
</div>


                </div>
            </div>
        

        
        

        
        <a href="#" id="top-button" class="no-hover-padding" title="PrzejdÅº na poczÄ…tek strony">
            <svg viewBox="0 0 20 20" fill="currentColor"><path d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z"/></svg>
        </a>
    </div>


<link rel="stylesheet" href="https://rust-lab-pjatk.github.io/katex.min.css">
    <script defer src="https://rust-lab-pjatk.github.io/js/katex.min.js"></script><script defer src="https://rust-lab-pjatk.github.io/js/mermaid.min.js"></script><span id="copy-success" class="hidden">
        Skopiowano!
    </span>
    <span id="copy-init" class="hidden">
        Skopiuj kod do schowka
    </span>
    <script defer src="https://rust-lab-pjatk.github.io/js/copyCodeToClipboard.min.js"></script>


    </div>
    <footer>
    <section>
        <nav class="socials nav-navs"><ul>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me"  href="mailto:rustlab@pjwstk.edu.pl">
                                    <img loading="lazy" alt="email" title="email" src="https://rust-lab-pjatk.github.io/social_icons/email.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me"  href="https://github.com/Rust-Lab-PJATK">
                                    <img loading="lazy" alt="github" title="github" src="https://rust-lab-pjatk.github.io/social_icons/github.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me"  href="https://www.linkedin.com/company/rust-lab-pjatk">
                                    <img loading="lazy" alt="linkedin" title="linkedin" src="https://rust-lab-pjatk.github.io/social_icons/linkedin.svg">
                                </a>
                            </li>
                        
                            <li>
                                <a class="nav-links no-hover-padding social" rel=" me"  href="https://www.instagram.com/rustlabpjatk">
                                    <img loading="lazy" alt="instagram" title="instagram" src="https://rust-lab-pjatk.github.io/social_icons/instagram.svg">
                                </a>
                            </li>
                        
                    
                </ul>
            
        </nav>

        
        <nav class="nav-navs">
        </nav>

        <div class="credits">
            <small>
                
    
    
    
    
        
    
        
    

    

    
    
    

    
    
    <p><p>Â© 2025 Rust Lab PJATK â€¢ MateriaÅ‚y na tej stronie sÄ… udostÄ™pniane na licencji <a href="https://creativecommons.org/licenses/by-sa/4.0">CC BY-SA 4.0</a>.</p>
</p>

                
                Strona oparta na oprogramowaniu
                <a rel=""  href="https://www.getzola.org">Zola</a>
                i
                <a rel=""  href="https://github.com/welpo/tabi">tabi</a>

                </small>
        </div>
    </section>

    </footer>

</body>

</html>
